# 高德地图集成指南

## 概述

联系我们页面已经完成了高德地图的代码集成，只需要配置API Key即可显示地图和所有办事处位置标记。

## 功能特性

✅ **自动显示6个办事处位置**
- 深圳总部
- 珠海办事处
- 大连办事处
- 青岛办事处
- 苏州办事处
- 湖南办事处

✅ **交互功能**
- 点击地图标记显示办事处详细信息（地址、电话、邮箱）
- 地图支持缩放、拖拽、3D视图
- 标记点带有办事处名称标签

✅ **响应式设计**
- 移动端和桌面端自适应
- 地图高度根据屏幕尺寸调整

## 配置步骤

### 1. 注册高德开放平台账号

访问 [高德开放平台](https://lbs.amap.com/)，注册账号（个人开发者免费）。

### 2. 创建应用

1. 登录后进入 **控制台**
2. 点击 **应用管理** → **我的应用** → **创建新应用**
3. 填写应用信息：
   - 应用名称：好利来贸易官网
   - 应用类型：Web端（JS API）

### 3. 添加Key

1. 在创建的应用下，点击 **添加Key**
2. 填写Key信息：
   - Key名称：官网地图
   - 服务平台：**Web端（JS API）**
   - 选择 **JS API 2.0**
3. 提交后获得：
   - **Key**（一串字符串）
   - **安全密钥**（需要在"安全密钥"设置中获取）

### 4. 配置白名单（重要）

为了安全，需要配置域名白名单：

1. 在Key管理页面，找到 **IP白名单** 或 **域名白名单**
2. 添加您的网站域名，例如：
   - 开发环境：`localhost`、`127.0.0.1`
   - 生产环境：`www.holylight-marine.com`（您的实际域名）

### 5. 修改代码配置

打开文件 `/home/ubuntu/holylight-marine/client/src/pages/Contact.tsx`

找到第73-74行：

```typescript
const AMAP_KEY = "YOUR_AMAP_KEY_HERE";
const AMAP_SECRET = "YOUR_AMAP_SECRET_HERE";
```

替换为您获取的实际Key和安全密钥：

```typescript
const AMAP_KEY = "您的高德地图Key";
const AMAP_SECRET = "您的安全密钥";
```

### 6. 保存并测试

1. 保存文件
2. 刷新网站页面
3. 访问"联系我们"页面
4. 地图应该正常显示，并标记所有办事处位置

## 办事处坐标信息

代码中已经配置了所有办事处的地理坐标：

| 办事处 | 经度 | 纬度 | 位置描述 |
|--------|------|------|----------|
| 深圳总部 | 113.9428 | 22.5329 | 深圳市南山区科技园南区 |
| 珠海办事处 | 113.5765 | 22.2569 | 珠海市香洲区吉大路 |
| 大连办事处 | 121.6147 | 38.9140 | 大连市中山区人民路 |
| 青岛办事处 | 120.3826 | 36.0671 | 青岛市市南区香港中路 |
| 苏州办事处 | 120.7370 | 31.3041 | 苏州市工业园区星湖街 |
| 湖南办事处 | 112.9388 | 28.2282 | 长沙市岳麓区麓山南路 |

**注意：** 这些是示例坐标，请根据实际办事处地址修改。

## 修改办事处信息

如需修改办事处的地址、电话、邮箱或坐标，请编辑 `Contact.tsx` 文件中的 `offices` 数组（第20-62行）：

```typescript
const offices: Office[] = [
  {
    id: "shenzhen",
    name: "深圳总部",
    address: "广东省深圳市南山区科技园南区", // 修改地址
    phone: "+86 755-8888-8888", // 修改电话
    email: "shenzhen@holylight-marine.com", // 修改邮箱
    coordinates: [113.9428, 22.5329], // 修改坐标 [经度, 纬度]
  },
  // ... 其他办事处
];
```

### 如何获取准确的坐标？

1. 访问 [高德地图坐标拾取器](https://lbs.amap.com/tools/picker)
2. 搜索或点击地图上的具体位置
3. 复制显示的经纬度坐标
4. 更新到代码中的 `coordinates` 字段

## 费用说明

- **个人开发者账号**：每天 **30万次** 免费调用额度
- **企业开发者账号**：更高的免费额度和付费套餐
- 对于中小型网站，个人账号的免费额度完全足够使用

## 常见问题

### Q1: 地图不显示，控制台报错 "INVALID_USER_KEY"

**原因：** API Key配置错误或未配置

**解决：** 检查是否正确替换了 `AMAP_KEY` 和 `AMAP_SECRET`

### Q2: 地图显示但标记点不显示

**原因：** 坐标格式错误或超出中国范围

**解决：** 检查 `coordinates` 格式是否为 `[经度, 纬度]`，经度在 73-135 之间，纬度在 18-54 之间

### Q3: 地图显示"服务响应失败"

**原因：** 域名未添加到白名单

**解决：** 在高德控制台添加当前访问域名到白名单

### Q4: 想要修改地图初始缩放级别

**位置：** `Contact.tsx` 第125行

```typescript
const map = new window.AMap.Map("amap-container", {
  zoom: 5, // 修改这个值，范围 3-20，数字越大越详细
  center: [113.2644, 28.1925],
  viewMode: "3D",
  pitch: 0,
});
```

### Q5: 想要修改标记点的样式

**位置：** `Contact.tsx` 第133-142行

可以自定义标记的图标、颜色、大小等。参考 [高德地图 Marker 文档](https://lbs.amap.com/api/javascript-api-v2/documentation#marker)

## 技术支持

- 高德开放平台官方文档：https://lbs.amap.com/api/javascript-api-v2/documentation
- 高德地图示例中心：https://lbs.amap.com/demo/javascript-api-v2/example/map/map-show
- 技术支持论坛：https://lbs.amap.com/support/

## 部署到生产环境

在部署到阿里云服务器时：

1. 确保在高德控制台添加生产域名到白名单
2. 确认 API Key 和安全密钥已正确配置
3. 测试地图在生产环境是否正常显示
4. 监控API调用量，避免超出免费额度

---

**配置完成后，联系我们页面将完整展示：**
- ✅ 公司简介和营业时间
- ✅ 6个办事处的详细信息卡片
- ✅ 交互式地图显示所有办事处位置
- ✅ 在线留言表单
- ✅ 完全响应式设计

